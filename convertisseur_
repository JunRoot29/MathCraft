import json
import os

# Chemin du fichier source
INPUT_FILE = "questions-2.txt"

# Nouveau nom du fichier final
OUTPUT_FILE = "data/question_enigme.json"

def convertir_questions():
    try:
        print("üîÑ Conversion des questions...")

        # Lecture du fichier source
        with open(INPUT_FILE, "r", encoding="utf-8") as f:
            data = json.load(f)

        # Renommage des niveaux
        correspondance_niveaux = {
            "Facile": "D√©butant",
            "Moyen": "Interm√©diaire",
            "Difficile": "Expert"
        }

        questions_finales = {}

        for ancien_niveau, nouveau_niveau in correspondance_niveaux.items():
            questions_finales[nouveau_niveau] = []

            for item in data.get(ancien_niveau, []):
                question = {
                    "question": item.get("enigme", ""),  # renomme "enigme"
                    "reponse": item.get("reponse"),
                    "indices": item.get("indices", []),
                    "type": item.get("type", "calcul")
                }
                questions_finales[nouveau_niveau].append(question)

        # Cr√©ation du dossier /data si n√©cessaire
        os.makedirs("data", exist_ok=True)

        # Sauvegarde du JSON
        with open(OUTPUT_FILE, "w", encoding="utf-8") as f:
            json.dump(questions_finales, f, ensure_ascii=False, indent=2)

        print("üéØ Conversion termin√©e avec succ√®s !")
        print(f"üì¶ Fichier g√©n√©r√© : {OUTPUT_FILE}")

    except Exception as e:
        print(f"‚ùå ERREUR : {e}")


if __name__ == "__main__":
    convertir_questions()
